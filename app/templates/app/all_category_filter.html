{% extends 'app/base.html' %} 
{% load static %}
{% block title %}Index{% endblock title %}


{% block main-content %}
<div class="container">
   <br/><br/><br/><br/>
   <h2 class="text-center">{{ desired_category.name }}</h2>

   <br/><br/><br/><br/>
   <style>




<style>
    .product-box {
    border: 1px solid #ccc;
    padding: 10px;
    margin-bottom: 20px;
    }
 </style>

 

 <div class="container">
 

 <style>
     .product-box {
         border: 1px solid #ccc;
         padding: 10px;
         margin-bottom: 20px;
     }
     <style>
 




         .container {
           display: flex;
           flex-wrap: wrap;
           justify-content: center;
           align-items: center;
           gap: 20px;
           margin-top: 50px;
         }
         
         .product-card {
           width: 300px;
           border-radius: 10px;
           -webkit-box-shadow:  0px 0px 47px -20px rgba(0,0,0,1);
           -moz-box-shadow:  0px 0px 47px -20px rgba(0,0,0,1);
           box-shadow:  0px 0px 47px -20px rgba(0,0,0,1);
           margin: 60px 0px 60px 0px;
           background-color: #fff;
         }
         
         .product-image {
           height: 300px;
           overflow: hidden;
           position: relative;
           top:-90px;
           padding: 10px;
         }
         
         .product-image img {
           width: 100%;
           height: 100%;
           object-fit: cover;
           transition: transform 0.5s;
           border-radius: 10px;
         }
         
         .product-image:hover img {
           transform: scale(1.1);
         }
         
         .product-details {
           padding: 20px;
           margin-top:-90px;
         }
         
         .product-title {
           font-size: 1.5rem;
           margin-bottom: 10px;
         }
         
         .product-price {
           font-size: 1.25rem;
           font-weight: bold;
           margin-bottom: 10px;
         }
         
         .product-description {
           font-size: 1rem;
           line-height: 1.5;
           margin-bottom: 10px;
           color: #666;
         }
         
         .product-details.expand {
           height: auto;
         }
         
         .product-details .expand-button {
           cursor: pointer;
           font-size: 1rem;
           color: #666;
           text-align: center;
           margin-top: 10px;
         }
         
         .product-details .expand-button:hover {
           color: #000;
           text-decoration: underline;
         }
         .buttons {
           display: flex;
           justify-content: space-between;
           align-items: center;
         }
         
         .add-to-cart,
         .compare {
           padding: 10px 20px;
           border: none;
           border-radius: 20px;
           color: #fff;
           font-size: 1rem;
           font-weight: bold;
           cursor: pointer;
         }
         
         .add-to-cart {
           background-color: #666;
         }
         
         .compare {
           background-color: #CAC531;
           color:#fff;
         }
         
         .add-to-cart:hover,
         .compare:hover {
           opacity: 0.8;
         }
         
         .credit a {
           text-decoration: none;
           color: #000;
           font-weight: 800;
         }
         
         .credit {
             color: #000;
           text-align: center;
           margin-top: 10px;
           font-family: Verdana,Geneva,Tahoma,sans-serif;
         }
         
         
             </style>


<div class="container">
    <div class="container">
        <!-- Add the sorting and price range filter form -->
        <form id="filter-form" method="get" class="filter-form">
            <div class="filter-group">
                <label for="sort">Sort by:</label>
                <select id="sort" name="sort" class="filter-select">
                    <option value="all_item">All</option>
                    <option value="price_low_to_high">Price: Low to High</option>
                    <option value="price_high_to_low">Price: High to Low</option>
                </select>
            </div>
            <button type="submit" class="filter-button">Apply Filters</button>
        </form>
        
          
        <br><br><br>
    <div class="row">
        {% for product_obj in product %}
        <div class="col-md-3"> <!-- You can adjust the column size as per your design -->
          <div class="product-card">
            <a href="{% url 'product-detail' id=product_obj.id %}" class="btn">
              <div class="product-image">
                <img src="{{ product_obj.image.url }}" alt="Product Image">
              </div>
              <div class="product-details">
                <h2 class="product-title">{{ product_obj.name }}</h2>
                <div class="fw-bold text-danger">
                  Rs.{{ product_obj.after_discount }}/-
                  <small class="fw-light text-decoration-line-through">{{ product_obj.price }}</small>
                </div>
              </div>
            </a>
            
            <div class="row justify-content-center">
              <div class="col-sm-6 col-md-4">
                {% if totalitem > 0 and product_obj.id in cart_product_ids %}
                  <form action="{% url 'remove-from-cart' %}" method="post">
                    {% csrf_token %}
                    <input type="hidden" name="prod_id" value="{{ product_obj.id }}" />
                    <button type="submit" class="btn btn-danger shadow px-4 py-2">Remove</button>
                  </form>
                {% else %}
                  <!-- Show the "Add to Cart" form -->
                  <form action="/add-to-cart" method="post" class="d-flex justify-content-center justify-content-sm-start mb-2">
                    {% csrf_token %}
                    <input type="hidden" name="prod_id" value="{{ product_obj.id }}" />
                    <button type="submit" class="btn btn-primary shadow px-4 py-2">Add to Cart</button>
                  </form>
                {% endif %}
              </div>
              <div class="col-sm-6 col-md-4">
                <form action="/add-to-cart" method="post" class="d-flex justify-content-center justify-content-sm-start mb-2">
                  {% csrf_token %}
                  <input type="hidden" name="prod_id" value="{{ product_obj.id }}" />
                  <button type="submit" class="btn btn-warning shadow px-4 py-2">Buy</button>
                </form>
              </div>
            </div>
          </div>
        </div>
      {% endfor %}
      
    </div>
  </div>


  <br/><br/><br/><br/>
{% endblock main-content %}